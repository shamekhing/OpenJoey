<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META name="GENERATOR" content="IBM HomePage Builder 2001 V5.0.0 for Windows">
<TITLE>class CRegionHook</TITLE>
</HEAD><BODY bgcolor="#ccffcc" text="#336633" link="#0066cc" vlink="#009999" alink="#ff9900">
<P><FONT size="+2">class CRegionHook</FONT><A name="CTimeBase"></A><FONT color="#ff0000">【コンポーネント<FONT color="#ff0000">】</FONT></FONT></P>
<HR>
<P><FONT size="+1" color="#009900">☆　内容</FONT></P>
<P><A href="CWinHook.html">CWinHook</A>派生クラスです。変形ウィンドゥの管理を行ないます。具体的には、ウィンドゥの変形後、ウィンドゥのドラッグによる移動をサポートします。<A href="CRegion.html">CRegion</A>も参考にしてください。</P>

<P><FONT size="+1" color="#009900">☆　メンバ関数</FONT></P>
<P><FONT color="#00cc00">CRegionHook(CDIB32* lp);</FONT></P>
<P>コンストラクタで、画像読み込み済み、ヌキ色設定済みの<A href="CDIB32.html">CDIB32</A>のポインタを渡します。ヌキ色で抜けたリージョンが自動的に作成され、そのリージョンにウィンドゥを変形させます。変形ウィンドゥ実現のためには、ウィンドゥスタイルとしてWS_POPUPを指定しておかないといけません。その他、詳しいことは、<A href="http://www.sun-inet.or.jp/~yaneurao/">私のホームページ</A>にあるサンプル１５が参考になると思います。</P>
<P><FONT color="#00cc00">bool* IsDrag(void)</FONT>　// ドラッグでの移動中であるか？</P>
<P>ドラッグはメッセージループ中に行なわれるので、この関数は、メッセージ処理中（WM_PAINTメッセージ処理中など）にしか意味を持ちません。</P>
<P><BR>
あと、この関数は</P>
<P><FONT color="#00cc00">virtual bool MustBeDrag(const POINT&amp;
pt){<BR>
// この座標をドラッグするのか？<BR>
return true; // デイフォルトでドラッグする<BR>
}</FONT></P>
<P>派生先のクラスで必要に応じてオーバーライドすると良いでしょう。これは、マウスでドラッグされたときに、移動させるかどうかを判定するための関数で、ディフォルトでtrueになっています。POINT構造体が引数として渡されますので、これがクライアント座標においてどこをドラッグされたのか示していますので、これで領域判定を行ない、ドラッグしたくない場所（画面に配置しているボタンなど）ならば、falseを返すと良いでしょう。</P>
<HR>
</BODY></HTML>
