<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv="Content-Type" content="text/html; charset=Shift_jis">
<META http-equiv="Content-Language" content="ja">
<META name="GENERATOR" content="autoref version 1.0.0">
<LINK REL=STYLESHEET TYPE="text/css" HREF="document.css">
<SCRIPT LANGUAGE="JavaScript" SRC="document.js"></SCRIPT>
<TITLE>Input/yaneKeyInput.h のドキュメント</TITLE>
</HEAD>
<BODY>
<A name="top"></A>
<A name="CKeyInput"></A>
<SPAN class="reserved_word">class</SPAN>&nbsp;<SPAN class="class_name">CKeyInput</SPAN>
<HR>
<DIV class="block_title">クラスの説明</DIV>
<DIV class="comment_block">DirectInputによるキー入力クラス<BR>	継承元である、class IKeyBase , class IWinHook を参照のこと。<BR><BR>	IsPushKey/IsPressKeyの引数で指定する値は、DINPUT.Hのキー定義に準拠。<BR><BR>//--------	DirectInput keyboard scan codes ---------------------------<BR><BR>#define DIK_ESCAPE 0x01<BR>#define DIK_1 0x02<BR>#define DIK_2 0x03<BR>#define DIK_3 0x04<BR>#define DIK_4 0x05<BR>#define DIK_5 0x06<BR>#define DIK_6 0x07<BR>#define DIK_7 0x08<BR>#define DIK_8 0x09<BR>#define DIK_9 0x0A<BR>#define DIK_0 0x0B<BR>#define DIK_MINUS 0x0C	// - on main keyboard<BR>#define DIK_EQUALS 0x0D<BR>#define DIK_BACK 0x0E	// backspace<BR>#define DIK_TAB 0x0F<BR>#define DIK_Q 0x10<BR>#define DIK_W 0x11<BR>#define DIK_E 0x12<BR>#define DIK_R 0x13<BR>#define DIK_T 0x14<BR>#define DIK_Y 0x15<BR>#define DIK_U 0x16<BR>#define DIK_I 0x17<BR>#define DIK_O 0x18<BR>#define DIK_P 0x19<BR>#define DIK_LBRACKET 0x1A<BR>#define DIK_RBRACKET 0x1B<BR>#define DIK_RETURN 0x1C		// Enter on main keyboard<BR>#define DIK_LCONTROL 0x1D<BR>#define DIK_A 0x1E<BR>#define DIK_S 0x1F<BR>#define DIK_D 0x20<BR>#define DIK_F 0x21<BR>#define DIK_G 0x22<BR>#define DIK_H 0x23<BR>#define DIK_J 0x24<BR>#define DIK_K 0x25<BR>#define DIK_L 0x26<BR>#define DIK_SEMICOLON 0x27<BR>#define DIK_APOSTROPHE 0x28<BR>#define DIK_GRAVE 0x29		// accent grave<BR>#define DIK_LSHIFT 0x2A<BR>#define DIK_BACKSLASH 0x2B<BR>#define DIK_Z 0x2C<BR>#define DIK_X 0x2D<BR>#define DIK_C 0x2E<BR>#define DIK_V 0x2F<BR>#define DIK_B 0x30<BR>#define DIK_N 0x31<BR>#define DIK_M 0x32<BR>#define DIK_COMMA 0x33<BR>#define DIK_PERIOD 0x34		// . on main keyboard<BR>#define DIK_SLASH 0x35		// / on main keyboard<BR>#define DIK_RSHIFT 0x36<BR>#define DIK_MULTIPLY 0x37	// * on numeric keypad<BR>#define DIK_LMENU 0x38		// left Alt<BR>#define DIK_SPACE 0x39<BR>#define DIK_CAPITAL 0x3A<BR>#define DIK_F1 0x3B<BR>#define DIK_F2 0x3C<BR>#define DIK_F3 0x3D<BR>#define DIK_F4 0x3E<BR>#define DIK_F5 0x3F<BR>#define DIK_F6 0x40<BR>#define DIK_F7 0x41<BR>#define DIK_F8 0x42<BR>#define DIK_F9 0x43<BR>#define DIK_F10 0x44<BR>#define DIK_NUMLOCK 0x45<BR>#define DIK_SCROLL 0x46		// Scroll Lock<BR>#define DIK_NUMPAD7 0x47<BR>#define DIK_NUMPAD8 0x48<BR>#define DIK_NUMPAD9 0x49<BR>#define DIK_SUBTRACT 0x4A	// - on numeric keypad<BR>#define DIK_NUMPAD4 0x4B<BR>#define DIK_NUMPAD5 0x4C<BR>#define DIK_NUMPAD6 0x4D<BR>#define DIK_ADD 0x4E		// + on numeric keypad<BR>#define DIK_NUMPAD1 0x4F<BR>#define DIK_NUMPAD2 0x50<BR>#define DIK_NUMPAD3 0x51<BR>#define DIK_NUMPAD0 0x52<BR>#define DIK_DECIMAL 0x53	// . on numeric keypad<BR>#define DIK_F11 0x57<BR>#define DIK_F12 0x58<BR><BR>#define DIK_F13 0x64 // (NEC PC98)<BR>#define DIK_F14 0x65 // (NEC PC98)<BR>#define DIK_F15 0x66 // (NEC PC98)<BR><BR>#define DIK_KANA 0x70		// (Japanese keyboard)<BR>#define DIK_CONVERT 0x79	// (Japanese keyboard)<BR>#define DIK_NOCONVERT 0x7B	// (Japanese keyboard)<BR>#define DIK_YEN 0x7D		// (Japanese keyboard)<BR>#define DIK_NUMPADEQUALS 0x8D	// = on numeric keypad (NEC PC98)<BR>#define DIK_CIRCUMFLEX 0x90		// (Japanese keyboard)<BR>#define DIK_AT 0x91				// (NEC PC98)<BR>#define DIK_COLON 0x92			// (NEC PC98)<BR>#define DIK_UNDERLINE 0x93		// (NEC PC98)<BR>#define DIK_KANJI 0x94			// (Japanese keyboard)<BR>#define DIK_STOP 0x95			// (NEC PC98)<BR>#define DIK_AX 0x96				// (Japan AX)<BR>#define DIK_UNLABELED 0x97		// (J3100)<BR>#define DIK_NUMPADENTER 0x9C	// Enter on numeric keypad<BR>#define DIK_RCONTROL 0x9D<BR>#define DIK_NUMPADCOMMA 0xB3	// , on numeric keypad (NEC PC98)<BR>#define DIK_DIVIDE 0xB5			// / on numeric keypad<BR>#define DIK_SYSRQ 0xB7<BR>#define DIK_RMENU 0xB8			// right Alt<BR>#define DIK_PAUSE 0xC5			// Pause<BR>#define DIK_HOME 0xC7			// Home on arrow keypad<BR>#define DIK_UP 0xC8				// UpArrow on arrow keypad<BR>#define DIK_PRIOR 0xC9			// PgUp on arrow keypad<BR>#define DIK_LEFT 0xCB			// LeftArrow on arrow keypad<BR>#define DIK_RIGHT 0xCD			// RightArrow on arrow keypad<BR>#define DIK_END 0xCF			// End on arrow keypad<BR>#define DIK_DOWN 0xD0			// DownArrow on arrow keypad<BR>#define DIK_NEXT 0xD1			// PgDn on arrow keypad<BR>#define DIK_INSERT 0xD2			// Insert on arrow keypad<BR>#define DIK_DELETE 0xD3			// Delete on arrow keypad<BR>#define DIK_LWIN 0xDB			// Left Windows key<BR>#define DIK_RWIN 0xDC			// Right Windows key<BR>#define DIK_APPS 0xDD			// AppMenu key<BR>#define DIK_POWER 0xDE<BR>#define DIK_SLEEP 0xDF<BR><BR>//	Alternate names for keys, to facilitate transition from DOS.<BR><BR>#define DIK_BACKSPACE DIK_BACK			//	backspace<BR>#define DIK_NUMPADSTAR DIK_MULTIPLY		// on numeric keypad<BR>#define DIK_LALT DIK_LMENU				// left Alt<BR>#define DIK_CAPSLOCK DIK_CAPITAL		// CapsLock<BR>#define DIK_NUMPADMINUS DIK_SUBTRACT	// - on numeric keypad<BR>#define DIK_NUMPADPLUS DIK_ADD			// + on numeric keypad<BR>#define DIK_NUMPADPERIOD DIK_DECIMAL	// . on numeric keypad<BR>#define DIK_NUMPADSLASH DIK_DIVIDE		// / on numeric keypad<BR>#define DIK_RALT DIK_RMENU				// right Alt<BR>#define DIK_UPARROW DIK_UP				// UpArrow on arrow keypad<BR>#define DIK_PGUP DIK_PRIOR				// PgUp on arrow keypad<BR>#define DIK_LEFTARROW DIK_LEFT			// LeftArrow on arrow keypad<BR>#define DIK_RIGHTARROW DIK_RIGHT		// RightArrow on arrow keypad<BR>#define DIK_DOWNARROW DIK_DOWN			// DownArrow on arrow keypad<BR>#define DIK_PGDN DIK_NEXT				// PgDn on arrow keypad<BR><BR>--------------------------------------------------------------------------------<BR></DIV>
<DIV class="block_title">継承元</DIV>
<DIV class="super_class_block"><SPAN class="reserved_word">public</SPAN>&nbsp;<A class="class_link" href="Input!yaneKeyBase_h.html#IKeyBase" target=_self>IKeyBase</A><BR>
<SPAN class="reserved_word">public</SPAN>&nbsp;<A class="class_link" href="Window!yaneWinHook_h.html#IWinHook" target=_self>IWinHook</A><BR>
</DIV>
<DIV class="block_title">クラスメンバ</DIV>
<DIV class="class_member_block"><DIV class="public_member"><SPAN class="reserved_word">virtual</SPAN> <SPAN class="reserved_word">bool</SPAN> IsKeyPress(<SPAN class="reserved_word">int</SPAN> key)</DIV>
<DIV class="public_member"><SPAN class="reserved_word">virtual</SPAN> <SPAN class="reserved_word">bool</SPAN> IsKeyPush(<SPAN class="reserved_word">int</SPAN> key)</DIV>
<DIV class="public_member"><SPAN class="reserved_word">virtual</SPAN> LRESULT Input()</DIV>
<DIV class="comment_block">DirectInputのフォーカスは、現在のHWNDと関連付けてあるため、<BR>		フォーカスをLostすると、このGetKeyStateが失敗することは多々ある。<BR>		その場合には、エラーとして-1が返る<BR><BR>		また、DirectInputの初期化に失敗している場合は、正数が返る。<BR>		その場合であっても、キーバッファの中身は、ゼロクリアされていることが<BR>		保証される。<BR>	<BR></DIV>
</DIV>
<DIV class="class_member_block"><DIV class="public_member"><SPAN class="reserved_word">int</SPAN> GetStatus()</DIV>
<DIV class="comment_block">0:ok(DirectX5以降) 1:ok(DirectX3以降)<BR>		2:ok(DirectX3 on NT4.0)<BR>		3,4,5:failure(DirectX3すら入ってない)<BR>		6:DirectXは見つかったはずなのだが、KeyDeviceの取得に失敗<BR>		7:DirectInputの初期化SetDataFormatに失敗<BR>		8:DirectInputの初期化SetCooperativeLevelに失敗<BR>	<BR></DIV>
</DIV>
<DIV class="class_member_block"><DIV class="public_member"> CKeyInput(<SPAN class="reserved_word">bool</SPAN> bBackGround=false)</DIV>
<DIV class="comment_block">これをbForeGround==trueならば、ウィンドゥとは関連付けない<BR>		（ウィンドゥからフォーカスが失われても入力を検知できる）<BR>	<BR></DIV>
</DIV>
<DIV class="class_member_block"><DIV class="public_member"> virtual ~CKeyInput()</DIV>
<DIV class="comment_block"></DIV>
</DIV>
<DIV class="class_member_block"><DIV class="private_member"><A class="class_link" href="Input!yaneDirectInput_h.html#CDirectInput" target=_self>CDirectInput</A> m_vDirectInput</DIV>
<DIV class="private_member"><A class="class_link" href="Input!yaneDirectInput_h.html#CDirectInput" target=_self>CDirectInput</A>* GetDirectInput()</DIV>
<DIV class="comment_block"></DIV>
</DIV>
<DIV class="class_member_block"><DIV class="private_member">LPDIRECTINPUTDEVICE m_lpDIKeyDev</DIV>
<DIV class="private_member">LPDIRECTINPUTDEVICE GetDevice()</DIV>
<DIV class="comment_block"></DIV>
</DIV>
<DIV class="class_member_block"><DIV class="private_member"><SPAN class="reserved_word">int</SPAN> m_nStatus</DIV>
<DIV class="private_member"><SPAN class="reserved_word">bool</SPAN> m_bDIKeyAcquire</DIV>
<DIV class="comment_block"></DIV>
</DIV>
<DIV class="class_member_block"><DIV class="private_member"><SPAN class="reserved_word">virtual</SPAN> LRESULT WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)</DIV>
<DIV class="comment_block"></DIV>
</DIV>
<HR><BR>
</BODY></HTML>